---
title: "lego"
author: "Darren Redmond"
date: "August 15th, 2018"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{lego}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Darren's lego package provides helper functions, shiny app, plots/graphs, and statistics for a Brickset exported lego csv file.

So you have created a brickset account and added all of the lego sets that you own to your Brickset account. What next?

Well if you download your csv file for either your Owned or Wanted you can use this package to generate summary statistics, interactive plots, provide regression analysis, top 5 sets by value, and even comes with a shiny interactive application that you can analyse your lego collection in an interactive intuitive manner.

## Loading Data

So to export your data from Brickset - goto [https://brickset.com/export](https://brickset.com/export) and choose the exported csv file that you would like to export. The owned sets are the ones I started with:

[https://brickset.com/export/mysets/owned/csv](https://brickset.com/export/mysets/owned/csv)

For ease of use I've shipped the csv files from my account in the extdata directory as -> brickset-mysets-owned.csv
and brickset-mysets-wanted.csv
or all lego sets in the file sets.csv

These can be loaded with the code `system.file('extdata', 'brickset-mysets-owned.csv', package ='lego')`

I also a read.lego function which be used to convert the csv file into a dataset which the functions can use:

`lego::read.lego(system.file('extdata', 'brickset-mysets-owned.csv', package ='lego')`
`head(data, 10)`

```{r, echo=FALSE, results='asis'}
data <- lego::read.lego(system.file('extdata', 'brickset-mysets-owned.csv', package ='lego'))
knitr::kable(head(data))
```

So it can be seen that we have loaded in a dataset with 7 columns, theme, name, setId, year, pieces, price, subthem.

## Filtering Data

The first function created is the function to filter by year. This can be used to filter sets between a year range.

`lego::filterByYear(data, 2004, 2011)`

```{r, echo=FALSE, results='asis'}
knitr::kable(head(lego::filterByYear(data, 2004, 2011)))
```

The parameters are defaulted to the min and max in the dataset so you might call this function with just a min year set:

`lego::filterByYear(data, 2015)`

```{r, echo=FALSE, results='asis'}
knitr::kable(head(lego::filterByYear(data, 2015)))
```

Or, with just a max year set:

`lego::filterByYear(data, maxYear=2011)`

```{r, echo=FALSE, results='asis'}
knitr::kable(head(lego::filterByYear(data, maxYear=2011)))
```

## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

You can write math expressions, e.g. $Y = X\beta + \epsilon$, footnotes^[A footnote here.], and tables, e.g. using `knitr::kable()`.
